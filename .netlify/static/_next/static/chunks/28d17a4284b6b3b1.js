(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,45364,e=>{"use strict";let t="http://localhost:5001/api";async function a(e,r={}){let s=localStorage.getItem("authToken");if(!s||"mock-token-for-demo"===s)return{success:!1,error:"Authentication required. Please log in.",details:{type:"AuthError",message:"No valid authentication token found. Please log in to access admin features."}};let n={"Content-Type":"application/json",...r.headers};s&&(n.Authorization=`Bearer ${s}`);try{let a,s=await fetch(`${t}${e}`,{...r,headers:n}),l=await s.text(),o=s.headers.get("content-type")||"",i=o.includes("application/json"),c=l.trim(),d=c.startsWith("<!DOCTYPE")||c.startsWith("<html")||c.startsWith("<!")||c.toLowerCase().startsWith("<body"),u=0===c.length;if(!d&&!u&&(c.startsWith("{")||c.startsWith("[")||c.startsWith('"'))&&!i&&!d&&!u){console.warn("Response looks like JSON but Content-Type is not set correctly. Attempting to parse...");try{let e=JSON.parse(l);if(!s.ok)return{success:!1,error:e.error||`Request failed: ${s.status} ${s.statusText}`,details:e.details};return e}catch(e){console.warn("Failed to parse as JSON despite looking like JSON:",e)}}if(!i||d||u){let a,n=s.status,c=s.statusText,p=`${t}${e}`,m=r.method||"GET",g=l.length,x=l.substring(0,500),h={};try{h=Object.fromEntries(s.headers.entries())}catch(e){h={error:"Could not read headers"}}console.error("=== Non-JSON Response Error ==="),console.error("Status:",n),console.error("Status Text:",c),console.error("Content-Type:",o||"(not set)"),console.error("URL:",p),console.error("Method:",m),console.error("Response Length:",g),console.error("Is Empty:",u),console.error("Looks Like HTML:",d),console.error("Is JSON:",i),console.error("Response Preview:",x),console.error("All Headers:",JSON.stringify(h,null,2)),console.error("Full Response Text:",l),console.error("=============================");let y={status:n,statusText:c,contentType:o||"(not set)",url:p,method:m,textLength:g,isEmpty:u,looksLikeHtml:d,isJson:i,preview:x,allHeaders:h};return a=u?`Backend server returned empty response (${n} ${c}). The endpoint may not be implemented or there's a server error. Check backend logs.`:d?`Backend server returned HTML instead of JSON (${n} ${c}). This usually means the backend server is not running or the endpoint doesn't exist. Make sure the backend server is running at ${t}`:`Backend server returned non-JSON response (${n} ${c}). Content-Type: ${o||"(not set)"}. Response preview: ${x.substring(0,100)}...`,{success:!1,error:a,details:y}}try{a=JSON.parse(l)}catch(a){return console.error("JSON parse error:",{error:a,status:s.status,statusText:s.statusText,contentType:o,url:`${t}${e}`,preview:l.substring(0,200)}),{success:!1,error:`Backend server returned invalid JSON. Make sure the backend server is running at ${t}`,details:{status:s.status,contentType:o,preview:l.substring(0,200),parseError:a instanceof Error?a.message:String(a)}}}if(!s.ok){if(401===s.status||403===s.status)return localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),{success:!1,error:a.error||"Authentication failed. Please log in again.",details:{...a.details,type:"AuthError",status:s.status,requiresLogin:!0}};return{success:!1,error:a.error||`Request failed: ${s.status} ${s.statusText}`,details:a.details}}return a}catch(a){if(console.error("=== API Request Failed (Catch Block) ==="),console.error("Error Type:",a instanceof Error?a.constructor.name:typeof a),console.error("Error Message:",a instanceof Error?a.message:String(a)),console.error("Error Stack:",a instanceof Error?a.stack:"N/A"),console.error("Endpoint:",`${t}${e}`),console.error("Options:",JSON.stringify(r,null,2)),console.error("========================================"),a instanceof TypeError&&(a.message.includes("fetch")||a.message.includes("Failed to fetch")))return{success:!1,error:`Cannot connect to backend server at ${t}. Make sure the backend server is running and accessible.`,details:{originalError:a.message,endpoint:`${t}${e}`,type:"NetworkError"}};if(a instanceof SyntaxError&&a.message.includes("JSON"))return{success:!1,error:`Backend server is not responding correctly. Make sure the backend server is running at ${t}`,details:{originalError:a.message,endpoint:`${t}${e}`,type:"ParseError"}};return{success:!1,error:a instanceof Error?a.message:"Unknown network error",details:{originalError:String(a),endpoint:`${t}${e}`,type:"UnknownError"}}}}function r(e){return{getAll:async t=>{let r=new URLSearchParams;t?.page&&r.append("page",t.page.toString()),t?.limit&&r.append("limit",t.limit.toString()),t?.category&&r.append("category",t.category),t?.featured&&r.append("featured","true"),t?.active!==void 0&&r.append("active",t.active.toString()),t?.search&&r.append("search",t.search);let s=r.toString();return a(`/admin/${e}${s?`?${s}`:""}`)},getById:async t=>a(`/admin/${e}/${t}`),create:async t=>a(`/admin/${e}`,{method:"POST",body:JSON.stringify(t)}),update:async(t,r)=>a(`/admin/${e}/${t}`,{method:"PUT",body:JSON.stringify(r)}),delete:async t=>a(`/admin/${e}/${t}`,{method:"DELETE"})}}let s=r("tours"),n=r("cultural-events"),l=r("local-experiences"),o=r("transportation"),i=r("support-locals"),c=r("restaurants"),d=r("photo-challenges");e.s(["clientProfileApi",0,{getClients:async e=>{let t=new URLSearchParams;e?.page&&t.append("page",e.page.toString()),e?.limit&&t.append("limit",e.limit.toString()),e?.status&&t.append("status",e.status),e?.category&&t.append("category",e.category),e?.featured&&t.append("featured","true"),e?.search&&t.append("search",e.search);let r=t.toString();return a(`/admin/clients${r?`?${r}`:""}`)},getClient:async e=>a(`/admin/clients/${e}`),createClient:async e=>a("/admin/clients",{method:"POST",body:JSON.stringify(e)}),updateClient:async(e,t)=>a(`/admin/clients/${e}`,{method:"PUT",body:JSON.stringify(t)}),deleteClient:async e=>a(`/admin/clients/${e}`,{method:"DELETE"}),getVersions:async e=>a(`/admin/clients/${e}/versions`)},"culturalEventsApi",0,n,"localExperiencesApi",0,l,"mapLocationsApi",0,{getAll:async e=>{let t=new URLSearchParams;e?.page&&t.append("page",e.page.toString()),e?.limit&&t.append("limit",e.limit.toString()),e?.category&&t.append("category",e.category),e?.featured&&t.append("featured","true"),e?.active!==void 0&&t.append("active",e.active.toString()),e?.search&&t.append("search",e.search);let r=t.toString();return a(`/admin/map-locations${r?`?${r}`:""}`)},getById:async e=>a(`/admin/map-locations/${e}`),create:async e=>a("/admin/map-locations",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>a(`/admin/map-locations/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>a(`/admin/map-locations/${e}`,{method:"DELETE"})},"photoChallengesApi",0,d,"restaurantsApi",0,c,"supportLocalsApi",0,i,"toursApi",0,s,"transportationApi",0,o,"websiteAnalyticsApi",0,{getOverview:async e=>{let t=e?`?timeRange=${e}`:"";return a(`/admin/analytics/website/overview${t}`)},getTrafficMetrics:async e=>{let t=new URLSearchParams;e?.timeRange&&t.append("timeRange",e.timeRange),e?.groupBy&&t.append("groupBy",e.groupBy);let r=t.toString();return a(`/admin/analytics/website/traffic${r?`?${r}`:""}`)},getPopularPages:async e=>{let t=new URLSearchParams;e?.timeRange&&t.append("timeRange",e.timeRange),e?.limit&&t.append("limit",e.limit.toString());let r=t.toString();return a(`/admin/analytics/website/pages${r?`?${r}`:""}`)},getVisitorAnalytics:async e=>{let t=e?`?timeRange=${e}`:"";return a(`/admin/analytics/website/visitors${t}`)},getConversionFunnels:async e=>{let t=new URLSearchParams;e?.timeRange&&t.append("timeRange",e.timeRange),e?.conversionGoal&&t.append("conversionGoal",e.conversionGoal);let r=t.toString();return a(`/admin/analytics/website/conversions${r?`?${r}`:""}`)},exportAnalytics:async e=>{let t=new URLSearchParams;e?.format&&t.append("format",e.format),e?.timeRange&&t.append("timeRange",e.timeRange);let r=t.toString();return a(`/admin/analytics/website/export${r?`?${r}`:""}`)},trackEvent:async e=>a("/admin/analytics/website/track",{method:"POST",body:JSON.stringify(e)})}])},93824,39770,e=>{"use strict";var t=e.i(24638),a=e.i(49659);function r({images:e,onChange:r,label:s="Images"}){let[n,l]=(0,a.useState)(""),o=()=>{n.trim()&&i(n.trim())&&(r([...e,n.trim()]),l(""))},i=e=>{try{return new URL(e),!0}catch{return!1}};return(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s}),(0,t.jsxs)("div",{className:"space-y-2",children:[e.map((a,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex-1 flex items-center gap-2 p-2 border border-gray-300 rounded bg-gray-50",children:[i(a)&&(0,t.jsx)("img",{src:a,alt:`Preview ${s+1}`,className:"w-12 h-12 object-cover rounded",onError:e=>{e.target.style.display="none"}}),(0,t.jsx)("span",{className:"flex-1 text-sm text-gray-700 truncate",children:a})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{r(e.filter((e,t)=>t!==s))},className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"Remove"})]},s)),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"url",value:n,onChange:e=>l(e.target.value),placeholder:"https://example.com/image.jpg",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),o())}}),(0,t.jsx)("button",{type:"button",onClick:o,disabled:!n.trim()||!i(n.trim()),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"})]})]})]})}function s({location:e,latitude:r,longitude:s,onChange:n}){let[l,o]=(0,a.useState)(!1),[i,c]=(0,a.useState)(r?.toString()||""),[d,u]=(0,a.useState)(s?.toString()||""),p=()=>{n(e||"",""===i?null:parseFloat(i),""===d?null:parseFloat(d))};return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location Name / Address"}),(0,t.jsx)("input",{type:"text",value:e||"",onChange:e=>{n(e.target.value,r??null,s??null)},placeholder:"e.g., Eagle Beach, Aruba or Palm Beach, Oranjestad",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Enter a location name or address. Coordinates are optional but recommended for map display."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>o(!l),className:"text-sm text-blue-600 hover:text-blue-800 underline",children:[l?"Hide":"Add"," Coordinates (Optional)"]}),e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"•"}),(0,t.jsx)("button",{type:"button",onClick:()=>{if(e){let t=encodeURIComponent(e+", Aruba");window.open(`https://www.google.com/maps/search/?api=1&query=${t}`,"_blank")}else window.open("https://www.google.com/maps/@12.5211,-69.9683,12z","_blank");alert("1. Search for your location in Google Maps\n2. Right-click on the location\n3. Click the coordinates to copy them\n4. Paste them below")},className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Get from Google Maps"})]})]}),l&&(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Latitude (Optional)"}),(0,t.jsx)("input",{type:"number",step:"any",value:i,onChange:t=>{c(t.target.value),n(e||"",""===t.target.value?null:parseFloat(t.target.value),s??null)},onBlur:p,placeholder:"12.5211",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Longitude (Optional)"}),(0,t.jsx)("input",{type:"number",step:"any",value:d,onChange:t=>{u(t.target.value),n(e||"",r??null,""===t.target.value?null:parseFloat(t.target.value))},onBlur:p,placeholder:"-69.9683",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"})]})]}),r&&s&&(0,t.jsx)("div",{children:(0,t.jsx)("a",{href:`https://www.google.com/maps?q=${r},${s}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:"✓ View on Google Maps →"})}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Tip: Right-click on Google Maps to get coordinates, or leave blank to use location name only."})]})]})}e.s(["ImageUrlInput",()=>r],93824),e.s(["LocationInput",()=>s],39770)},7897,e=>{"use strict";var t=e.i(24638);function a({value:e,onChange:a}){let r=e||{},s=(e,t)=>{a({...r,[e]:t||void 0})};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Phone"}),(0,t.jsx)("input",{type:"tel",value:r.phone||"",onChange:e=>s("phone",e.target.value),placeholder:"+297 123-4567",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Email"}),(0,t.jsx)("input",{type:"email",value:r.email||"",onChange:e=>s("email",e.target.value),placeholder:"info@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Website"}),(0,t.jsx)("input",{type:"url",value:r.website||"",onChange:e=>s("website",e.target.value),placeholder:"https://example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Address"}),(0,t.jsx)("input",{type:"text",value:r.address||"",onChange:e=>s("address",e.target.value),placeholder:"Street address",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]})}e.s(["ContactInfoInput",()=>a])},49727,e=>{"use strict";var t=e.i(24638);let a=[{key:"monday",label:"Monday"},{key:"tuesday",label:"Tuesday"},{key:"wednesday",label:"Wednesday"},{key:"thursday",label:"Thursday"},{key:"friday",label:"Friday"},{key:"saturday",label:"Saturday"},{key:"sunday",label:"Sunday"}];function r({value:e,onChange:r,label:s="Operating Hours"}){let n=e||{},l=(e,t,a)=>{let s=n[e]||{};"closed"===t?r({...n,[e]:{closed:"true"===a}}):r({...n,[e]:{...s,closed:!1,[t]:a||void 0}})};return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s}),(0,t.jsx)("div",{className:"space-y-2",children:a.map(e=>{let a=n[e.key]||{},r=!0===a.closed;return(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg",children:[(0,t.jsx)("div",{className:"w-24 text-sm font-medium text-gray-700",children:e.label}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:r,onChange:t=>l(e.key,"closed",t.target.checked.toString()),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,t.jsx)("span",{className:"text-xs text-gray-600",children:"Closed"})]}),!r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{type:"time",value:a.open||"",onChange:t=>l(e.key,"open",t.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500",placeholder:"Open"}),(0,t.jsx)("span",{className:"text-gray-500",children:"-"}),(0,t.jsx)("input",{type:"time",value:a.close||"",onChange:t=>l(e.key,"close",t.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500",placeholder:"Close"})]})]},e.key)})})]})}e.s(["OperatingHoursInput",()=>r])},54326,e=>{"use strict";var t=e.i(24638),a=e.i(49659),r=e.i(3301),s=e.i(43447),n=e.i(45364),l=e.i(93824),o=e.i(39770),i=e.i(7897),c=e.i(49727);let d=[{value:"beach",label:"Beaches"},{value:"cultural_spot",label:"Cultural Spots"},{value:"natural_wonder",label:"Natural Wonders"},{value:"restaurant",label:"Restaurants"},{value:"local_shop",label:"Local Shops"},{value:"club_bar",label:"Clubs & Bars"},{value:"hotel",label:"Hotels"},{value:"activity",label:"Activities"}];function u(){let e=(0,r.useRouter)(),{user:l,isLoading:o,isAuthenticated:i}=(0,s.useAuth)(),[c,u]=(0,a.useState)([]),[m,g]=(0,a.useState)(!0),[x,h]=(0,a.useState)("beach"),[y,b]=(0,a.useState)(null),[f,v]=(0,a.useState)(!1),[j,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)({search:"",active:"",featured:""}),[S,C]=(0,a.useState)(!1);(0,a.useEffect)(()=>{o||i||e.push("/login")},[o,i,e]),(0,a.useEffect)(()=>{i&&$()},[i,x,w]);let $=async()=>{g(!0);try{let e=await n.mapLocationsApi.getAll({category:x,search:w.search||void 0,active:"active"===w.active||"inactive"!==w.active&&void 0,featured:"featured"===w.featured||void 0});if(e.success&&e.data){let t=Array.isArray(e.data)?e.data:e.data?.locations||[];u(t)}}catch(e){console.error("Failed to fetch map locations:",e)}finally{g(!1)}},E=async e=>{if(confirm("Are you sure you want to delete this map location?"))try{let t=await n.mapLocationsApi.delete(e);t.success?$():alert(t.error||"Failed to delete map location")}catch(e){console.error("Failed to delete map location:",e),alert("Failed to delete map location")}};return o?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"text-gray-600",children:"Loading..."})}):i?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white shadow",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Manage Map Locations"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Create and edit locations shown on the explore map."})]})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,t.jsx)("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:d.map(e=>(0,t.jsx)("button",{onClick:()=>h(e.value),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${x===e.value?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.label},e.value))})}),(0,t.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row gap-3",children:[(0,t.jsx)("input",{type:"text",value:w.search,onChange:e=>k({...w,search:e.target.value}),placeholder:"Search locations...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,t.jsxs)("select",{value:w.active,onChange:e=>k({...w,active:e.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"",children:"All Status"}),(0,t.jsx)("option",{value:"active",children:"Active"}),(0,t.jsx)("option",{value:"inactive",children:"Inactive"})]}),(0,t.jsxs)("select",{value:w.featured,onChange:e=>k({...w,featured:e.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"",children:"All"}),(0,t.jsx)("option",{value:"featured",children:"Featured Only"})]}),(0,t.jsx)("button",{onClick:()=>{b(null),N(!0),v(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold",children:"+ New Location"})]}),m?(0,t.jsx)("div",{className:"text-center py-8 text-gray-600",children:"Loading..."}):0===c.length?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No locations found for this category."}):(0,t.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.description&&(0,t.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.description})]}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.address||e.location||"-"}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,t.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${!1!==e.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:!1!==e.active?"Active":"Inactive"}),e.featured&&(0,t.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Featured"})]}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,t.jsx)("button",{onClick:()=>{b({...e}),N(!0),v(!0)},className:"text-blue-600 hover:text-blue-900 mr-4",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>E(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.id))})]})})})]}),f&&(0,t.jsx)(p,{location:y,selectedCategory:x,onClose:()=>{v(!1),N(!1),b(null)},onSave:$})]}):null}function p({location:e,selectedCategory:r,onClose:s,onSave:u}){let[p,m]=(0,a.useState)({name:e?.name||"",description:e?.description||"",category:e?.category||r,images:e?.images||[],location:e?.location||"",latitude:e?.latitude||null,longitude:e?.longitude||null,address:e?.address||"",contact_info:e?.contact_info||{},opening_hours:e?.opening_hours||{},featured:e?.featured||!1,active:e?.active!==!1,display_order:e?.display_order||0}),[g,x]=(0,a.useState)(!1);(0,a.useEffect)(()=>{m({name:e?.name||"",description:e?.description||"",category:e?.category||r,images:e?.images||[],location:e?.location||"",latitude:e?.latitude||null,longitude:e?.longitude||null,address:e?.address||"",contact_info:e?.contact_info||{},opening_hours:e?.opening_hours||{},featured:e?.featured||!1,active:e?.active!==!1,display_order:e?.display_order||0})},[e,r]);let h=async t=>{t.preventDefault(),x(!0);try{let t={name:p.name,description:p.description,category:p.category,images:p.images||[],location:p.location,latitude:p.latitude??void 0,longitude:p.longitude??void 0,address:p.address,contact_info:p.contact_info||{},opening_hours:p.opening_hours||{},featured:p.featured||!1,active:!1!==p.active,display_order:p.display_order||0},a=e?await n.mapLocationsApi.update(e.id,t):await n.mapLocationsApi.create(t);a.success?(u(),s()):alert(a.error||"Failed to save map location")}catch(e){console.error("Failed to save map location:",e),alert("Failed to save map location")}finally{x(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:e?"Edit Map Location":"Create Map Location"}),(0,t.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"×"})]}),(0,t.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),(0,t.jsx)("input",{type:"text",required:!0,value:p.name,onChange:e=>m({...p,name:e.target.value}),placeholder:"Enter location name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,t.jsx)("textarea",{value:p.description,onChange:e=>m({...p,description:e.target.value}),rows:4,placeholder:"Enter description",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),(0,t.jsx)("select",{required:!0,value:p.category,onChange:e=>m({...p,category:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:d.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsx)(l.ImageUrlInput,{images:p.images||[],onChange:e=>m({...p,images:e})}),(0,t.jsx)(o.LocationInput,{location:p.location,latitude:p.latitude,longitude:p.longitude,onChange:(e,t,a)=>m({...p,location:e,latitude:t,longitude:a})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),(0,t.jsx)("textarea",{value:p.address,onChange:e=>m({...p,address:e.target.value}),rows:2,placeholder:"Enter full address",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsx)(i.ContactInfoInput,{value:p.contact_info||{},onChange:e=>m({...p,contact_info:e})}),(0,t.jsx)(c.OperatingHoursInput,{value:p.opening_hours||{},onChange:e=>m({...p,opening_hours:e}),label:"Opening Hours"}),(0,t.jsxs)("div",{className:"flex gap-6",children:[(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",checked:p.featured,onChange:e=>m({...p,featured:e.target.checked}),className:"mr-2 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Featured"})]}),(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",checked:p.active,onChange:e=>m({...p,active:e.target.checked}),className:"mr-2 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Order"}),(0,t.jsx)("input",{type:"number",value:p.display_order,onChange:e=>m({...p,display_order:parseInt(e.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:s,className:"px-6 py-2 text-gray-700 hover:text-gray-900",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:g||!p.name,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:g?"Saving...":"Save"})]})]})]})})})}e.s(["default",()=>u])}]);