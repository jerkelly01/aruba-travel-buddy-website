(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,45364,e=>{"use strict";let t="http://localhost:5001/api";async function r(e,a={}){let s=localStorage.getItem("authToken");if(!s||"mock-token-for-demo"===s)return{success:!1,error:"Authentication required. Please log in.",details:{type:"AuthError",message:"No valid authentication token found. Please log in to access admin features."}};let n={"Content-Type":"application/json",...a.headers};s&&(n.Authorization=`Bearer ${s}`);try{let r,s=await fetch(`${t}${e}`,{...a,headers:n}),l=await s.text(),o=s.headers.get("content-type")||"",i=o.includes("application/json"),c=l.trim(),d=c.startsWith("<!DOCTYPE")||c.startsWith("<html")||c.startsWith("<!")||c.toLowerCase().startsWith("<body"),u=0===c.length;if(!d&&!u&&(c.startsWith("{")||c.startsWith("[")||c.startsWith('"'))&&!i&&!d&&!u){console.warn("Response looks like JSON but Content-Type is not set correctly. Attempting to parse...");try{let e=JSON.parse(l);if(!s.ok)return{success:!1,error:e.error||`Request failed: ${s.status} ${s.statusText}`,details:e.details};return e}catch(e){console.warn("Failed to parse as JSON despite looking like JSON:",e)}}if(!i||d||u){let r,n=s.status,c=s.statusText,p=`${t}${e}`,g=a.method||"GET",m=l.length,x=l.substring(0,500),h={};try{h=Object.fromEntries(s.headers.entries())}catch(e){h={error:"Could not read headers"}}console.error("=== Non-JSON Response Error ==="),console.error("Status:",n),console.error("Status Text:",c),console.error("Content-Type:",o||"(not set)"),console.error("URL:",p),console.error("Method:",g),console.error("Response Length:",m),console.error("Is Empty:",u),console.error("Looks Like HTML:",d),console.error("Is JSON:",i),console.error("Response Preview:",x),console.error("All Headers:",JSON.stringify(h,null,2)),console.error("Full Response Text:",l),console.error("=============================");let y={status:n,statusText:c,contentType:o||"(not set)",url:p,method:g,textLength:m,isEmpty:u,looksLikeHtml:d,isJson:i,preview:x,allHeaders:h};return r=u?`Backend server returned empty response (${n} ${c}). The endpoint may not be implemented or there's a server error. Check backend logs.`:d?`Backend server returned HTML instead of JSON (${n} ${c}). This usually means the backend server is not running or the endpoint doesn't exist. Make sure the backend server is running at ${t}`:`Backend server returned non-JSON response (${n} ${c}). Content-Type: ${o||"(not set)"}. Response preview: ${x.substring(0,100)}...`,{success:!1,error:r,details:y}}try{r=JSON.parse(l)}catch(r){return console.error("JSON parse error:",{error:r,status:s.status,statusText:s.statusText,contentType:o,url:`${t}${e}`,preview:l.substring(0,200)}),{success:!1,error:`Backend server returned invalid JSON. Make sure the backend server is running at ${t}`,details:{status:s.status,contentType:o,preview:l.substring(0,200),parseError:r instanceof Error?r.message:String(r)}}}if(!s.ok){if(401===s.status||403===s.status)return localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),{success:!1,error:r.error||"Authentication failed. Please log in again.",details:{...r.details,type:"AuthError",status:s.status,requiresLogin:!0}};return{success:!1,error:r.error||`Request failed: ${s.status} ${s.statusText}`,details:r.details}}return r}catch(r){if(console.error("=== API Request Failed (Catch Block) ==="),console.error("Error Type:",r instanceof Error?r.constructor.name:typeof r),console.error("Error Message:",r instanceof Error?r.message:String(r)),console.error("Error Stack:",r instanceof Error?r.stack:"N/A"),console.error("Endpoint:",`${t}${e}`),console.error("Options:",JSON.stringify(a,null,2)),console.error("========================================"),r instanceof TypeError&&(r.message.includes("fetch")||r.message.includes("Failed to fetch")))return{success:!1,error:`Cannot connect to backend server at ${t}. Make sure the backend server is running and accessible.`,details:{originalError:r.message,endpoint:`${t}${e}`,type:"NetworkError"}};if(r instanceof SyntaxError&&r.message.includes("JSON"))return{success:!1,error:`Backend server is not responding correctly. Make sure the backend server is running at ${t}`,details:{originalError:r.message,endpoint:`${t}${e}`,type:"ParseError"}};return{success:!1,error:r instanceof Error?r.message:"Unknown network error",details:{originalError:String(r),endpoint:`${t}${e}`,type:"UnknownError"}}}}function a(e){return{getAll:async t=>{let a=new URLSearchParams;t?.page&&a.append("page",t.page.toString()),t?.limit&&a.append("limit",t.limit.toString()),t?.category&&a.append("category",t.category),t?.featured&&a.append("featured","true"),t?.active!==void 0&&a.append("active",t.active.toString()),t?.search&&a.append("search",t.search);let s=a.toString();return r(`/admin/${e}${s?`?${s}`:""}`)},getById:async t=>r(`/admin/${e}/${t}`),create:async t=>r(`/admin/${e}`,{method:"POST",body:JSON.stringify(t)}),update:async(t,a)=>r(`/admin/${e}/${t}`,{method:"PUT",body:JSON.stringify(a)}),delete:async t=>r(`/admin/${e}/${t}`,{method:"DELETE"})}}let s=a("tours"),n=a("cultural-events"),l=a("local-experiences"),o=a("transportation"),i=a("support-locals"),c=a("restaurants"),d=a("photo-challenges");e.s(["clientProfileApi",0,{getClients:async e=>{let t=new URLSearchParams;e?.page&&t.append("page",e.page.toString()),e?.limit&&t.append("limit",e.limit.toString()),e?.status&&t.append("status",e.status),e?.category&&t.append("category",e.category),e?.featured&&t.append("featured","true"),e?.search&&t.append("search",e.search);let a=t.toString();return r(`/admin/clients${a?`?${a}`:""}`)},getClient:async e=>r(`/admin/clients/${e}`),createClient:async e=>r("/admin/clients",{method:"POST",body:JSON.stringify(e)}),updateClient:async(e,t)=>r(`/admin/clients/${e}`,{method:"PUT",body:JSON.stringify(t)}),deleteClient:async e=>r(`/admin/clients/${e}`,{method:"DELETE"}),getVersions:async e=>r(`/admin/clients/${e}/versions`)},"culturalEventsApi",0,n,"localExperiencesApi",0,l,"mapLocationsApi",0,{getAll:async e=>{let t=new URLSearchParams;e?.page&&t.append("page",e.page.toString()),e?.limit&&t.append("limit",e.limit.toString()),e?.category&&t.append("category",e.category),e?.featured&&t.append("featured","true"),e?.active!==void 0&&t.append("active",e.active.toString()),e?.search&&t.append("search",e.search);let a=t.toString();return r(`/admin/map-locations${a?`?${a}`:""}`)},getById:async e=>r(`/admin/map-locations/${e}`),create:async e=>r("/admin/map-locations",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>r(`/admin/map-locations/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>r(`/admin/map-locations/${e}`,{method:"DELETE"})},"photoChallengesApi",0,d,"restaurantsApi",0,c,"supportLocalsApi",0,i,"toursApi",0,s,"transportationApi",0,o,"websiteAnalyticsApi",0,{getOverview:async e=>{let t=e?`?timeRange=${e}`:"";return r(`/admin/analytics/website/overview${t}`)},getTrafficMetrics:async e=>{let t=new URLSearchParams;e?.timeRange&&t.append("timeRange",e.timeRange),e?.groupBy&&t.append("groupBy",e.groupBy);let a=t.toString();return r(`/admin/analytics/website/traffic${a?`?${a}`:""}`)},getPopularPages:async e=>{let t=new URLSearchParams;e?.timeRange&&t.append("timeRange",e.timeRange),e?.limit&&t.append("limit",e.limit.toString());let a=t.toString();return r(`/admin/analytics/website/pages${a?`?${a}`:""}`)},getVisitorAnalytics:async e=>{let t=e?`?timeRange=${e}`:"";return r(`/admin/analytics/website/visitors${t}`)},getConversionFunnels:async e=>{let t=new URLSearchParams;e?.timeRange&&t.append("timeRange",e.timeRange),e?.conversionGoal&&t.append("conversionGoal",e.conversionGoal);let a=t.toString();return r(`/admin/analytics/website/conversions${a?`?${a}`:""}`)},exportAnalytics:async e=>{let t=new URLSearchParams;e?.format&&t.append("format",e.format),e?.timeRange&&t.append("timeRange",e.timeRange);let a=t.toString();return r(`/admin/analytics/website/export${a?`?${a}`:""}`)},trackEvent:async e=>r("/admin/analytics/website/track",{method:"POST",body:JSON.stringify(e)})}])},93824,39770,e=>{"use strict";var t=e.i(24638),r=e.i(49659);function a({images:e,onChange:a,label:s="Images"}){let[n,l]=(0,r.useState)(""),o=()=>{n.trim()&&i(n.trim())&&(a([...e,n.trim()]),l(""))},i=e=>{try{return new URL(e),!0}catch{return!1}};return(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s}),(0,t.jsxs)("div",{className:"space-y-2",children:[e.map((r,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex-1 flex items-center gap-2 p-2 border border-gray-300 rounded bg-gray-50",children:[i(r)&&(0,t.jsx)("img",{src:r,alt:`Preview ${s+1}`,className:"w-12 h-12 object-cover rounded",onError:e=>{e.target.style.display="none"}}),(0,t.jsx)("span",{className:"flex-1 text-sm text-gray-700 truncate",children:r})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{a(e.filter((e,t)=>t!==s))},className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"Remove"})]},s)),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"url",value:n,onChange:e=>l(e.target.value),placeholder:"https://example.com/image.jpg",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),o())}}),(0,t.jsx)("button",{type:"button",onClick:o,disabled:!n.trim()||!i(n.trim()),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"})]})]})]})}function s({location:e,latitude:a,longitude:s,onChange:n}){let[l,o]=(0,r.useState)(!1),[i,c]=(0,r.useState)(a?.toString()||""),[d,u]=(0,r.useState)(s?.toString()||""),p=()=>{n(e||"",""===i?null:parseFloat(i),""===d?null:parseFloat(d))};return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location Name / Address"}),(0,t.jsx)("input",{type:"text",value:e||"",onChange:e=>{n(e.target.value,a??null,s??null)},placeholder:"e.g., Eagle Beach, Aruba or Palm Beach, Oranjestad",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Enter a location name or address. Coordinates are optional but recommended for map display."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>o(!l),className:"text-sm text-blue-600 hover:text-blue-800 underline",children:[l?"Hide":"Add"," Coordinates (Optional)"]}),e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"•"}),(0,t.jsx)("button",{type:"button",onClick:()=>{if(e){let t=encodeURIComponent(e+", Aruba");window.open(`https://www.google.com/maps/search/?api=1&query=${t}`,"_blank")}else window.open("https://www.google.com/maps/@12.5211,-69.9683,12z","_blank");alert("1. Search for your location in Google Maps\n2. Right-click on the location\n3. Click the coordinates to copy them\n4. Paste them below")},className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Get from Google Maps"})]})]}),l&&(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Latitude (Optional)"}),(0,t.jsx)("input",{type:"number",step:"any",value:i,onChange:t=>{c(t.target.value),n(e||"",""===t.target.value?null:parseFloat(t.target.value),s??null)},onBlur:p,placeholder:"12.5211",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Longitude (Optional)"}),(0,t.jsx)("input",{type:"number",step:"any",value:d,onChange:t=>{u(t.target.value),n(e||"",a??null,""===t.target.value?null:parseFloat(t.target.value))},onBlur:p,placeholder:"-69.9683",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"})]})]}),a&&s&&(0,t.jsx)("div",{children:(0,t.jsx)("a",{href:`https://www.google.com/maps?q=${a},${s}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:"✓ View on Google Maps →"})}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Tip: Right-click on Google Maps to get coordinates, or leave blank to use location name only."})]})]})}e.s(["ImageUrlInput",()=>a],93824),e.s(["LocationInput",()=>s],39770)},11653,e=>{"use strict";var t=e.i(24638),r=e.i(49659),a=e.i(3301),s=e.i(43447),n=e.i(93824),l=e.i(39770);function o({contentType:e,contentTypeLabel:n,api:l,getFields:o,getEmptyItem:c,renderCustomFields:d}){let u=(0,a.useRouter)(),{user:p,isLoading:g,isAuthenticated:m}=(0,s.useAuth)(),[x,h]=(0,r.useState)([]),[y,b]=(0,r.useState)(!0),[f,v]=(0,r.useState)(null),[j,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),[$,S]=(0,r.useState)({search:"",category:"",active:"",featured:""}),[C,E]=(0,r.useState)(!1),[T,A]=(0,r.useState)(null);(0,r.useEffect)(()=>{g||m||u.push("/login")},[g,m,u]),(0,r.useEffect)(()=>{m&&R()},[m,$]),(0,r.useEffect)(()=>{if(j){let e=f||c()||{};console.log("Modal opened:",{isModalOpen:j,isEditing:w,selectedItem:f,currentItem:e,hasCustomFields:!!d,getEmptyItemResult:c()})}},[j,w,f,d,c]);let R=async()=>{b(!0),A(null);try{let t=await l.getAll({search:$.search||void 0,category:$.category||void 0,active:"active"===$.active||"inactive"!==$.active&&void 0,featured:"featured"===$.featured||void 0});t.success&&t.data?h(t.data.items||t.data[e]||[]):A(t.error||`Failed to fetch ${n}`)}catch(r){console.error(`Failed to fetch ${e}:`,r);let t=r instanceof Error?r.message:`Failed to fetch ${n}`;A(t),(t.includes("backend")||t.includes("Backend server"))&&console.warn("Backend connection issue detected. Make sure the backend server is running.")}finally{b(!1)}},O=async e=>{if(confirm(`Are you sure you want to delete this ${n}?`))try{let t=await l.delete(e);if(t.success)R();else{let e=t.error||`Failed to delete ${n}`;console.error("Delete error:",t),alert(e)}}catch(e){console.error(`Failed to delete ${n}:`,e),alert(e instanceof Error?e.message:`Failed to delete ${n}`)}};return g?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"text-gray-600",children:"Loading..."})}):m?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white shadow",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Manage ",n]}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Create and edit ",n.toLowerCase()," shown in the app."]})]})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row gap-3",children:[(0,t.jsx)("input",{type:"text",value:$.search,onChange:e=>S({...$,search:e.target.value}),placeholder:`Search ${n.toLowerCase()}...`,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,t.jsxs)("select",{value:$.active,onChange:e=>S({...$,active:e.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"",children:"All Status"}),(0,t.jsx)("option",{value:"active",children:"Active"}),(0,t.jsx)("option",{value:"inactive",children:"Inactive"})]}),(0,t.jsxs)("select",{value:$.featured,onChange:e=>S({...$,featured:e.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"",children:"All"}),(0,t.jsx)("option",{value:"featured",children:"Featured Only"})]}),(0,t.jsxs)("button",{onClick:()=>{v(null),k(!0),N(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold",children:["+ New ",n]})]}),T&&(0,t.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsxs)("h3",{className:"text-sm font-medium text-red-800",children:["Error loading ",n.toLowerCase()]}),(0,t.jsxs)("div",{className:"mt-2 text-sm text-red-700",children:[(0,t.jsx)("p",{children:T}),T.includes("backend")||T.includes("Backend server")?(0,t.jsxs)("p",{className:"mt-2",children:[(0,t.jsx)("strong",{children:"Solution:"})," Make sure your backend server is running on port 3000.",(0,t.jsx)("br",{}),"Run: ",(0,t.jsx)("code",{className:"bg-red-100 px-1 rounded",children:"cd backend && npm run dev"})]}):null]}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)("button",{type:"button",onClick:()=>{A(null),R()},className:"text-sm font-medium text-red-800 hover:text-red-900 underline",children:"Try again"})})]})]})}),y?(0,t.jsx)("div",{className:"text-center py-8 text-gray-600",children:"Loading..."}):T?null:0===x.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:["No ",n.toLowerCase()," found."]}):(0,t.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"restaurants"===e||"support-locals"===e||"transportation"===e?"Name":"Title"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title||e.name}),e.description&&(0,t.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.description})]}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.category||"-"}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,t.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${!1!==e.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:!1!==e.active?"Active":"Inactive"}),e.featured&&(0,t.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Featured"})]}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,t.jsx)("button",{onClick:()=>{v({...e}),k(!0),N(!0)},className:"text-blue-600 hover:text-blue-900 mr-4",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>O(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.id))})]})})})]}),j&&(0,t.jsx)(i,{item:f,contentType:e,contentTypeLabel:n,getEmptyItem:c,getFields:o,renderCustomFields:d,onClose:()=>{N(!1),k(!1),v(null)},onSave:async t=>{E(!0);try{let r;if(console.log("Saving data:",{contentType:e,contentTypeLabel:n,data:t,fields:o(t)}),r=w&&f?.id?await l.update(f.id,o(t)):await l.create(o(t)),console.log("Save response:",r),r.success)N(!1),k(!1),v(null),R();else{let t=r.error||`Failed to save ${n||e}`;console.error("Save failed:",{response:r,contentType:e,contentTypeLabel:n}),alert(t)}}catch(t){console.error(`Failed to save ${n||e}:`,t),alert(t instanceof Error?t.message:`Failed to save ${n||e}`)}finally{E(!1)}},saving:C})]}):null}function i({item:e,contentType:a,contentTypeLabel:s,getEmptyItem:o,getFields:i,renderCustomFields:c,onClose:d,onSave:u,saving:p}){let[g,m]=(0,r.useState)(()=>e||o()||{});(0,r.useEffect)(()=>{m(e||o()||{})},[e,o]);let x=async e=>{e.preventDefault(),await u(g)};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:e?.id?`Edit ${s}`:`Create ${s}`}),(0,t.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"×"})]}),(0,t.jsxs)("form",{onSubmit:x,className:"space-y-4",children:["restaurants"===a||"support-locals"===a||"transportation"===a?(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),(0,t.jsx)("input",{type:"text",required:!0,value:g?.name||"",onChange:e=>m({...g,name:e.target.value}),placeholder:"Enter name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),(0,t.jsx)("input",{type:"text",required:!0,value:g?.title||"",onChange:e=>m({...g,title:e.target.value}),placeholder:"Enter title",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,t.jsx)("textarea",{value:g?.description||"",onChange:e=>m({...g,description:e.target.value}),rows:4,placeholder:"Enter description",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,t.jsx)("input",{type:"text",value:g?.category||"",onChange:e=>m({...g,category:e.target.value}),placeholder:"Enter category",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsx)(n.ImageUrlInput,{images:g?.images||[],onChange:e=>m({...g,images:e})}),(0,t.jsx)(l.LocationInput,{location:g?.location||"",latitude:g?.latitude,longitude:g?.longitude,onChange:(e,t,r)=>m({...g,location:e,latitude:t,longitude:r})}),c&&c(g,m),g?.tags!==void 0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (comma separated)"}),(0,t.jsx)("input",{type:"text",value:Array.isArray(g.tags)?g.tags.join(", "):g.tags||"",onChange:e=>m({...g,tags:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}),placeholder:"tag1, tag2, tag3",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{className:"flex gap-6",children:[(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",checked:g?.featured||!1,onChange:e=>m({...g,featured:e.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-2"}),(0,t.jsx)("span",{className:"text-sm text-gray-700",children:"Featured"})]}),(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",checked:g?.active!==!1,onChange:e=>m({...g,active:e.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-2"}),(0,t.jsx)("span",{className:"text-sm text-gray-700",children:"Active"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Order"}),(0,t.jsx)("input",{type:"number",value:g?.display_order||0,onChange:e=>m({...g,display_order:parseInt(e.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:d,className:"px-6 py-2 text-gray-700 hover:text-gray-900",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:p||!(g?.title||g?.name),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:p?"Saving...":"Save"})]})]})]})})})}e.s(["ContentManagementPage",()=>o])},7897,e=>{"use strict";var t=e.i(24638);function r({value:e,onChange:r}){let a=e||{},s=(e,t)=>{r({...a,[e]:t||void 0})};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Phone"}),(0,t.jsx)("input",{type:"tel",value:a.phone||"",onChange:e=>s("phone",e.target.value),placeholder:"+297 123-4567",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Email"}),(0,t.jsx)("input",{type:"email",value:a.email||"",onChange:e=>s("email",e.target.value),placeholder:"info@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Website"}),(0,t.jsx)("input",{type:"url",value:a.website||"",onChange:e=>s("website",e.target.value),placeholder:"https://example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Address"}),(0,t.jsx)("input",{type:"text",value:a.address||"",onChange:e=>s("address",e.target.value),placeholder:"Street address",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]})}e.s(["ContactInfoInput",()=>r])},49727,e=>{"use strict";var t=e.i(24638);let r=[{key:"monday",label:"Monday"},{key:"tuesday",label:"Tuesday"},{key:"wednesday",label:"Wednesday"},{key:"thursday",label:"Thursday"},{key:"friday",label:"Friday"},{key:"saturday",label:"Saturday"},{key:"sunday",label:"Sunday"}];function a({value:e,onChange:a,label:s="Operating Hours"}){let n=e||{},l=(e,t,r)=>{let s=n[e]||{};"closed"===t?a({...n,[e]:{closed:"true"===r}}):a({...n,[e]:{...s,closed:!1,[t]:r||void 0}})};return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s}),(0,t.jsx)("div",{className:"space-y-2",children:r.map(e=>{let r=n[e.key]||{},a=!0===r.closed;return(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg",children:[(0,t.jsx)("div",{className:"w-24 text-sm font-medium text-gray-700",children:e.label}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:a,onChange:t=>l(e.key,"closed",t.target.checked.toString()),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,t.jsx)("span",{className:"text-xs text-gray-600",children:"Closed"})]}),!a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{type:"time",value:r.open||"",onChange:t=>l(e.key,"open",t.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500",placeholder:"Open"}),(0,t.jsx)("span",{className:"text-gray-500",children:"-"}),(0,t.jsx)("input",{type:"time",value:r.close||"",onChange:t=>l(e.key,"close",t.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500",placeholder:"Close"})]})]},e.key)})})]})}e.s(["OperatingHoursInput",()=>a])},24950,e=>{"use strict";var t=e.i(24638),r=e.i(11653),a=e.i(7897),s=e.i(49727),n=e.i(45364);function l(){return(0,t.jsx)(r.ContentManagementPage,{contentType:"restaurants",contentTypeLabel:"Restaurant",api:n.restaurantsApi,getFields:e=>({name:e.name,description:e.description,cuisine_types:e.cuisine_types||[],price_range:e.price_range,images:e.images||[],location:e.location,latitude:e.latitude,longitude:e.longitude,contact_info:e.contact_info||{},operating_hours:e.operating_hours||{},featured:e.featured||!1,active:!1!==e.active,display_order:e.display_order||0}),getEmptyItem:()=>({name:"",description:"",cuisine_types:[],price_range:"$$",images:[],location:"",latitude:null,longitude:null,contact_info:{},operating_hours:{},featured:!1,active:!0,display_order:0}),renderCustomFields:(e,r)=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price Range"}),(0,t.jsxs)("select",{value:e.price_range||"$$",onChange:t=>r({...e,price_range:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"$",children:"$ - Budget"}),(0,t.jsx)("option",{value:"$$",children:"$$ - Moderate"}),(0,t.jsx)("option",{value:"$$$",children:"$$$ - Expensive"}),(0,t.jsx)("option",{value:"$$$$",children:"$$$$ - Very Expensive"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cuisine Types (comma separated)"}),(0,t.jsx)("input",{type:"text",value:Array.isArray(e.cuisine_types)?e.cuisine_types.join(", "):"",onChange:t=>r({...e,cuisine_types:t.target.value.split(",").map(e=>e.trim()).filter(Boolean)}),placeholder:"Italian, Seafood, Local",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsx)(a.ContactInfoInput,{value:e.contact_info||{},onChange:t=>r({...e,contact_info:t})}),(0,t.jsx)(s.OperatingHoursInput,{value:e.operating_hours||{},onChange:t=>r({...e,operating_hours:t})})]})})}e.s(["default",()=>l])}]);