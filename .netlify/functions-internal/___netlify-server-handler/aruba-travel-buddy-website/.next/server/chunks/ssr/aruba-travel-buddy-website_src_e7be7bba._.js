module.exports=[42810,a=>{"use strict";var b=a.i(97242),c=a.i(97924),d=a.i(26315),e=a.i(36380),f=a.i(57857),g=a.i(12218);function h({contentType:a,contentTypeLabel:f,api:g,getFields:h,getEmptyItem:j,renderCustomFields:k}){let l=(0,d.useRouter)(),{user:m,isLoading:n,isAuthenticated:o}=(0,e.useAuth)(),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)({search:"",category:"",active:"",featured:""}),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(null);(0,c.useEffect)(()=>{n||o||l.push("/login")},[n,o,l]),(0,c.useEffect)(()=>{o&&F()},[o,z]),(0,c.useEffect)(()=>{if(v){let a=t||j()||{};console.log("Modal opened:",{isModalOpen:v,isEditing:x,selectedItem:t,currentItem:a,hasCustomFields:!!k,getEmptyItemResult:j()})}},[v,x,t,k,j]);let F=async()=>{s(!0),E(null);try{let b=await g.getAll({search:z.search||void 0,category:z.category||void 0,active:"active"===z.active||"inactive"!==z.active&&void 0,featured:"featured"===z.featured||void 0});b.success&&b.data?q(b.data.items||b.data[a]||[]):E(b.error||`Failed to fetch ${f}`)}catch(c){console.error(`Failed to fetch ${a}:`,c);let b=c instanceof Error?c.message:`Failed to fetch ${f}`;E(b),(b.includes("backend")||b.includes("Backend server"))&&console.warn("Backend connection issue detected. Make sure the backend server is running.")}finally{s(!1)}},G=async a=>{if(confirm(`Are you sure you want to delete this ${f}?`))try{let b=await g.delete(a);if(b.success)F();else{let a=b.error||`Failed to delete ${f}`;console.error("Delete error:",b),alert(a)}}catch(a){console.error(`Failed to delete ${f}:`,a),alert(a instanceof Error?a.message:`Failed to delete ${f}`)}};return n?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsx)("div",{className:"text-gray-600",children:"Loading..."})}):o?(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white shadow",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[(0,b.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Manage ",f]}),(0,b.jsxs)("p",{className:"text-gray-600",children:["Create and edit ",f.toLowerCase()," shown in the app."]})]})}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row gap-3",children:[(0,b.jsx)("input",{type:"text",value:z.search,onChange:a=>A({...z,search:a.target.value}),placeholder:`Search ${f.toLowerCase()}...`,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,b.jsxs)("select",{value:z.active,onChange:a=>A({...z,active:a.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"",children:"All Status"}),(0,b.jsx)("option",{value:"active",children:"Active"}),(0,b.jsx)("option",{value:"inactive",children:"Inactive"})]}),(0,b.jsxs)("select",{value:z.featured,onChange:a=>A({...z,featured:a.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"",children:"All"}),(0,b.jsx)("option",{value:"featured",children:"Featured Only"})]}),(0,b.jsxs)("button",{onClick:()=>{u(null),y(!0),w(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold",children:["+ New ",f]})]}),D&&(0,b.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,b.jsxs)("div",{className:"ml-3",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-red-800",children:["Error loading ",f.toLowerCase()]}),(0,b.jsxs)("div",{className:"mt-2 text-sm text-red-700",children:[(0,b.jsx)("p",{children:D}),D.includes("backend")||D.includes("Backend server")?(0,b.jsxs)("p",{className:"mt-2",children:[(0,b.jsx)("strong",{children:"Solution:"})," Make sure your backend server is running on port 3000.",(0,b.jsx)("br",{}),"Run: ",(0,b.jsx)("code",{className:"bg-red-100 px-1 rounded",children:"cd backend && npm run dev"})]}):null]}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)("button",{type:"button",onClick:()=>{E(null),F()},className:"text-sm font-medium text-red-800 hover:text-red-900 underline",children:"Try again"})})]})]})}),r?(0,b.jsx)("div",{className:"text-center py-8 text-gray-600",children:"Loading..."}):D?null:0===p.length?(0,b.jsxs)("div",{className:"text-center py-8 text-gray-500",children:["No ",f.toLowerCase()," found."]}):(0,b.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"restaurants"===a||"support-locals"===a||"transportation"===a?"Name":"Title"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.title||a.name}),a.description&&(0,b.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:a.description})]}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.category||"-"}),(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,b.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${!1!==a.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:!1!==a.active?"Active":"Inactive"}),a.featured&&(0,b.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Featured"})]}),(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,b.jsx)("button",{onClick:()=>{u({...a}),y(!0),w(!0)},className:"text-blue-600 hover:text-blue-900 mr-4",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>G(a.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},a.id))})]})})})]}),v&&(0,b.jsx)(i,{item:t,contentType:a,contentTypeLabel:f,getEmptyItem:j,getFields:h,renderCustomFields:k,onClose:()=>{w(!1),y(!1),u(null)},onSave:async b=>{C(!0);try{let c;if(console.log("Saving data:",{contentType:a,contentTypeLabel:f,data:b,fields:h(b)}),c=x&&t?.id?await g.update(t.id,h(b)):await g.create(h(b)),console.log("Save response:",c),c.success)w(!1),y(!1),u(null),F();else{let b=c.error||`Failed to save ${f||a}`;console.error("Save failed:",{response:c,contentType:a,contentTypeLabel:f}),alert(b)}}catch(b){console.error(`Failed to save ${f||a}:`,b),alert(b instanceof Error?b.message:`Failed to save ${f||a}`)}finally{C(!1)}},saving:B})]}):null}function i({item:a,contentType:d,contentTypeLabel:e,getEmptyItem:h,getFields:i,renderCustomFields:j,onClose:k,onSave:l,saving:m}){let[n,o]=(0,c.useState)(()=>a||h()||{});(0,c.useEffect)(()=>{o(a||h()||{})},[a,h]);let p=async a=>{a.preventDefault(),await l(n)};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,b.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:a?.id?`Edit ${e}`:`Create ${e}`}),(0,b.jsx)("button",{onClick:k,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"Ã—"})]}),(0,b.jsxs)("form",{onSubmit:p,className:"space-y-4",children:["restaurants"===d||"support-locals"===d||"transportation"===d?(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),(0,b.jsx)("input",{type:"text",required:!0,value:n?.name||"",onChange:a=>o({...n,name:a.target.value}),placeholder:"Enter name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}):(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),(0,b.jsx)("input",{type:"text",required:!0,value:n?.title||"",onChange:a=>o({...n,title:a.target.value}),placeholder:"Enter title",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,b.jsx)("textarea",{value:n?.description||"",onChange:a=>o({...n,description:a.target.value}),rows:4,placeholder:"Enter description",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,b.jsx)("input",{type:"text",value:n?.category||"",onChange:a=>o({...n,category:a.target.value}),placeholder:"Enter category",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsx)(f.ImageUrlInput,{images:n?.images||[],onChange:a=>o({...n,images:a})}),(0,b.jsx)(g.LocationInput,{location:n?.location||"",latitude:n?.latitude,longitude:n?.longitude,onChange:(a,b,c)=>o({...n,location:a,latitude:b,longitude:c})}),j&&j(n,o),n?.tags!==void 0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (comma separated)"}),(0,b.jsx)("input",{type:"text",value:Array.isArray(n.tags)?n.tags.join(", "):n.tags||"",onChange:a=>o({...n,tags:a.target.value.split(",").map(a=>a.trim()).filter(Boolean)}),placeholder:"tag1, tag2, tag3",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{className:"flex gap-6",children:[(0,b.jsxs)("label",{className:"flex items-center",children:[(0,b.jsx)("input",{type:"checkbox",checked:n?.featured||!1,onChange:a=>o({...n,featured:a.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-2"}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:"Featured"})]}),(0,b.jsxs)("label",{className:"flex items-center",children:[(0,b.jsx)("input",{type:"checkbox",checked:n?.active!==!1,onChange:a=>o({...n,active:a.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-2"}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:"Active"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Order"}),(0,b.jsx)("input",{type:"number",value:n?.display_order||0,onChange:a=>o({...n,display_order:parseInt(a.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:k,className:"px-6 py-2 text-gray-700 hover:text-gray-900",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:m||!(n?.title||n?.name),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:m?"Saving...":"Save"})]})]})]})})})}a.s(["ContentManagementPage",()=>h])},8898,a=>{"use strict";var b=a.i(97242),c=a.i(42810),d=a.i(38716);function e(){return(0,b.jsx)(c.ContentManagementPage,{contentType:"tours",contentTypeLabel:"Tour",api:d.toursApi,getFields:a=>({title:a.title,description:a.description,duration:a.duration,price:a.price,images:a.images||[],location:a.location,latitude:a.latitude,longitude:a.longitude,category:a.category,tags:a.tags||[],featured:a.featured||!1,active:!1!==a.active,display_order:a.display_order||0}),getEmptyItem:()=>({title:"",description:"",duration:"",price:"",images:[],location:"",latitude:null,longitude:null,category:"",tags:[],featured:!1,active:!0,display_order:0}),renderCustomFields:(a,c)=>(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration"}),(0,b.jsx)("input",{type:"text",value:a.duration||"",onChange:b=>c({...a,duration:b.target.value}),placeholder:"3.5 hours",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),(0,b.jsx)("input",{type:"text",value:a.price||"",onChange:b=>c({...a,price:b.target.value}),placeholder:"$129",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})})})}a.s(["default",()=>e])}];

//# sourceMappingURL=aruba-travel-buddy-website_src_e7be7bba._.js.map